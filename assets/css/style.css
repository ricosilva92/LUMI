/* ==================================================================
   LUMI • Neo v4 — CSS completo (dark-first)
   Paleta: brand green #5E8B6F + amarelo CTA + azul neutro
   Estrutura: Reset → Tokens → Temas → Base → Header → Hero → Secções → Componentes
              → Formulários → Dashboard (sidebar/chat) → Utilitários → Responsivo
   ================================================================== */

/* ========== Reset ========== */
*,*::before,*::after{box-sizing:border-box}
html{scroll-behavior:smooth;-webkit-text-size-adjust:100%}
body,h1,h2,h3,p,figure{margin:0}
img,svg,video{display:block;max-width:100%;height:auto}
a{text-decoration:none;color:inherit}
button,input,select,textarea{font:inherit;color:inherit}

/* ========== Design Tokens ========== */
:root{
  /* Cores base (dark default) */
  --bg-0:#0B1220;      /* fundo */
  --bg-1:#0E172A;      /* superfície 1 */
  --bg-2:#121D33;      /* superfície 2 */
  --line:rgba(255,255,255,.08);

  /* Marca */
  --brand:#5E8B6F;      /* VERDE LUMI */
  --brand-600:#4E775E;  /* hover/dark */
  --brand-300:#7AAE8C;  /* claro */

  /* Complementares */
  --cta:#F5C518;        /* amarelo CTA */
  --cta-600:#D8AC10;
  --info:#38BDF8;       /* azul discreto */
  --info-700:#0284C7;

  /* Tipografia */
  --text:#E8EEF6;
  --muted:#9FB0C8;

  /* Layout */
  --container:min(1180px,92vw);
  --radius:16px;
  --radius-lg:22px;
  --gap:clamp(16px,2vw,28px);
  --shadow:0 8px 26px rgba(0,0,0,.35);
  --glass:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  --blur:saturate(1.3) blur(14px);
}

/* ========== Temas (compatibilidade com classes e body.light) ========== */
body.dark-mode{
  --bg-0:#0B1220; --bg-1:#0E172A; --bg-2:#121D33; --line:rgba(255,255,255,.08);
  --text:#E8EEF6; --muted:#9FB0C8; --shadow:0 8px 26px rgba(0,0,0,.35);
}
body.light-mode,
body.light{
  --bg-0:#F6F8FC; --bg-1:#FFFFFF; --bg-2:#F3F6FD; --line:rgba(0,0,0,.08);
  --text:#0C1526; --muted:#5B6B87; --shadow:0 10px 28px rgba(10,20,40,.08);
}

/* ========== Base ========== */
body{
  min-height:100dvh;
  background:
    radial-gradient(900px 420px at 10% -10%, rgba(94,139,111,.22), transparent 60%),
    radial-gradient(900px 420px at 110% 0%, rgba(56,189,248,.14), transparent 60%),
    linear-gradient(180deg,var(--bg-0),var(--bg-1));
  color:var(--text);
  font:400 16px/1.6 "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}
h1,h2,h3{font-family:"Poppins","Inter",sans-serif; line-height:1.15; letter-spacing:-.2px}
h1{font-weight:800; font-size:clamp(2rem,4.6vw,3rem)}
h2{font-weight:700; font-size:clamp(1.5rem,3vw,2rem); margin-bottom:.6rem}
h3{font-weight:700; font-size:clamp(1.125rem,2.2vw,1.35rem)}
p{color:var(--muted)}
.container{width:var(--container); margin-inline:auto}
.section{padding:clamp(56px,8vw,100px) 0}

/* Acessibilidade */
.skip-link{position:absolute;left:-9999px}
.skip-link:focus{left:16px;top:16px;background:#000;color:#fff;padding:.6rem .8rem;border-radius:10px;z-index:999}

/* ========== Header / Navbar ========== */
.site-header{
  position:sticky; top:0; z-index:40;
  background:var(--glass);
  backdrop-filter:var(--blur);
  border-bottom:1px solid var(--line);
}
.nav{
  width:var(--container); margin:auto;
  display:flex; align-items:center; gap:12px;
  padding:12px 0;
}
.logo{display:flex;align-items:center;gap:10px;font-weight:800}
.logo svg,.logo img{height:44px;width:auto}
.logo span{font-size:20px;letter-spacing:.2px}
.menu-toggle{display:none;margin-left:auto;border:1px solid var(--line);background:transparent;border-radius:12px;padding:.5rem .7rem;cursor:pointer}
.nav-links{margin-left:auto;display:flex;align-items:center;gap:12px}
.nav-links a{padding:.5rem .65rem;border-radius:10px;transition:background .2s ease,color .2s ease,transform .12s ease}
.nav-links a:hover{background:rgba(255,255,255,.06);color:var(--brand);transform:translateY(-1px)}
.nav-links .btn{margin-left:6px}

/* Botão de tema (IDs usados no HTML) */
#themeToggle,#toggle-theme{
  min-width:46px; justify-content:center; line-height:1;
}

/* ========== Hero ========== */
.hero{
  position:relative; isolation:isolate;
  padding:clamp(90px,14vw,180px) 0 clamp(60px,10vw,90px);
  text-align:center;
}
.hero::after{
  content:""; position:absolute; inset:0; z-index:-1; pointer-events:none;
  background:
    radial-gradient(850px 320px at 70% 0%, rgba(245,197,24,.12), transparent 60%),
    radial-gradient(900px 360px at 0% 100%, rgba(94,139,111,.18), transparent 60%);
}
.hero__content{width:var(--container); margin:auto}
.hero__title{letter-spacing:-.4px}
.hero__subtitle{max-width:780px;margin:10px auto 24px;font-size:clamp(1rem,1.7vw,1.125rem)}
.hero__actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}

/* ========== Secções / Cards / Grids ========== */
.card{
  background:var(--glass);
  border:1px solid var(--line);
  border-radius:var(--radius-lg);
  padding:clamp(18px,2.6vw,28px);
  box-shadow:var(--shadow);
  backdrop-filter:var(--blur);
}
.grid{display:grid;gap:var(--gap)}
.grid-3{grid-template-columns:repeat(3,1fr)}
.grid-4{grid-template-columns:repeat(4,1fr)}

/* ========== Componentes ==========
   Botões, features, métricas, FAQ, Toast, Footer  */
.btn{
  --_bg:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  --_fg:var(--text);
  display:inline-flex;align-items:center;justify-content:center;gap:.55rem;
  padding:.9rem 1.15rem;border-radius:14px;border:1px solid var(--line);
  background:var(--_bg); color:var(--_fg);
  font-weight:700; transition:transform .12s ease,box-shadow .2s ease,background .2s ease,color .2s ease;
  box-shadow:var(--shadow);
}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn-accent{--_bg:linear-gradient(180deg,var(--cta),var(--cta-600)); --_fg:#0E1424}
.btn-secondary{--_bg:linear-gradient(180deg,var(--info),var(--info-700)); --_fg:#061422; color:#E9F7FF}
.btn-green{--_bg:linear-gradient(180deg,var(--brand),var(--brand-600)); --_fg:#0D141F; color:#EAF4EE}

.feature{text-align:center;padding:6px}
.feature__icon{font-size:28px;margin-bottom:8px}

/* Stats */
.stats .stat,
.stat{
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid var(--line); border-radius:var(--radius);
  text-align:center; padding:18px; box-shadow:var(--shadow)
}
.stat__value{font:800 clamp(28px,4.8vw,42px)/1 "Poppins","Inter",sans-serif;color:var(--brand)}
.stat__label{color:var(--muted);font-size:.9rem;margin-top:4px}

/* FAQ */
#faq details{
  background:var(--glass); border:1px solid var(--line); border-radius:12px;
  padding:14px 16px; transition:transform .15s ease, background .2s ease
}
#faq details + details{margin-top:10px}
#faq details:hover{transform:translateY(-1px)}
#faq summary{cursor:pointer;font-weight:700;position:relative;padding-right:26px}
#faq summary::-webkit-details-marker{display:none}
#faq summary::after{content:"▸";position:absolute;right:8px;top:0;opacity:.65;transition:transform .2s ease}
#faq details[open] summary::after{transform:rotate(90deg) translateX(-2px);opacity:.95}

/* Toast */
.toast{position:fixed;right:16px;bottom:16px;background:var(--glass);border:1px solid var(--line);padding:12px 14px;border-radius:12px;box-shadow:var(--shadow)}

/* Footer */
.site-footer{color:var(--muted);text-align:center;padding:28px 0;border-top:1px solid var(--line);margin-top:clamp(40px,6vw,80px)}

/* ========== Formulários (Login / Registo) ========== */
.auth{
  min-height:calc(100dvh - 70px);
  display:grid;place-items:center; padding:clamp(40px,8vw,80px) 16px;
  background:
    radial-gradient(900px 340px at 80% -10%, rgba(94,139,111,.18), transparent 60%),
    radial-gradient(900px 300px at -10% 100%, rgba(56,189,248,.14), transparent 60%);
}
.auth-card{
  width:min(460px,96vw);
  background:var(--glass); border:1px solid var(--line);
  border-radius:var(--radius-lg); box-shadow:var(--shadow);
  backdrop-filter:var(--blur);
  padding:clamp(22px,3.2vw,32px)
}
.auth-card h1{margin-bottom:.2rem}
.auth-sub{color:var(--muted);margin-bottom:18px}

.form{display:grid;gap:14px;margin-top:10px}
.input-group{display:grid;gap:8px}
.label{font-size:.95rem;color:var(--muted)}
.input,.select{
  appearance:none;width:100%;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  color:var(--text); border:1px solid var(--line); border-radius:12px;
  padding:12px 14px; outline:none; transition:border-color .15s ease, box-shadow .15s ease
}
.input::placeholder{color:rgba(190,204,226,.7)}
.input:focus,.select:focus{border-color:rgba(94,139,111,.7); box-shadow:0 0 0 4px rgba(94,139,111,.25)}
.form-row{display:flex;gap:12px}.form-row>*{flex:1}
.form-help{display:flex;justify-content:space-between;align-items:center;margin-top:2px}
.link{color:var(--info);font-weight:700}.link:hover{text-decoration:underline}
.btn-block{width:100%;padding:14px 16px}
.btn-primary{--_bg:linear-gradient(180deg,var(--brand),var(--brand-600)); --_fg:#0E1424; color:#E9F7EF; border-color:rgba(0,0,0,.06)}
.error{display:none;background:rgba(239,68,68,.12);color:#fecaca;border:1px solid rgba(239,68,68,.35);padding:10px 12px;border-radius:10px;font-weight:700}

/* ========== Dashboard (Sidebar / Conteúdo / Chat / Relatórios) ========== */
.layout{
  display:grid;
  grid-template-columns: 240px 1fr;
  gap:24px;
  width:var(--container);
  margin: clamp(18px, 4vw, 28px) auto;
  align-items:start;
}

/* Sidebar */
.sidebar{
  position: sticky; top: 84px;
  background: var(--glass); backdrop-filter: var(--blur);
  border:1px solid var(--line);
  border-radius: 16px; box-shadow: var(--shadow);
  padding: 12px;
}
.sidebar ul{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
.tab-btn{
  width:100%; text-align:left;
  border:1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  color:var(--text);
  border-radius:12px; padding:.75rem .9rem;
  font-weight:700; cursor:pointer; transition:.15s ease;
}
.tab-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.08); }
.tab-btn.is-active{ outline:2px solid rgba(94,139,111,.45); background: rgba(94,139,111,.10); }

/* Content area */
.content{ display:grid; gap:26px; }
.content h1{ font-size: clamp(22px, 2.6vw, 28px); margin-bottom: 4px; }
.content h2{ font-size: clamp(18px, 2vw, 22px); }
.content section{ padding: 18px; background: var(--glass); border:1px solid var(--line); border-radius:16px; box-shadow: var(--shadow); }

/* Progresso: stats como cards */
#progresso .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
#progresso .stat{
  background: var(--surface, transparent);
  border:1px solid var(--line);
  border-radius:14px; padding:20px; text-align:center;
}

/* Exercícios */
#exercicios p{ color: var(--muted); margin:.2rem 0 .6rem; }
#exercicios .input, #exercicios input[type="number"]{
  width: 180px; display:inline-block; margin-right:10px;
}
#feedbackExercicio{ font-weight:700; }

/* Chat */
#chat{ padding:0; display:grid; grid-template-rows: auto 1fr auto; }
#chat h1{ padding:18px; padding-bottom:0; }
.chat-box{
  margin:12px; margin-top:6px;
  height: 300px; overflow:auto;
  border:1px solid var(--line); border-radius:14px;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  padding:12px; display:flex; flex-direction:column; gap:8px;
}
.msg{ max-width:70%; padding:.6rem .8rem; border-radius:14px; line-height:1.45; }
.msg.you{ align-self:flex-end; background: rgba(94,139,111,.18); border:1px solid rgba(94,139,111,.35); }
.msg.bot{ align-self:flex-start; background: rgba(56,189,248,.12); border:1px solid rgba(56,189,248,.35); }
.msg time{ display:block; font-size:.78rem; opacity:.7; margin-top:2px; }

.chat-input{
  display:flex; gap:8px; padding:12px; border-top:1px solid var(--line);
  background: var(--glass); border-radius: 0 0 16px 16px;
}
.chat-input input{ flex:1 }

/* Relatórios */
#relatorios pre{
  background: #0b1220bb; color: var(--text);
  border:1px solid var(--line); border-radius:12px;
  padding:12px; overflow:auto; max-height: 280px;
  font-size:.92rem;
}

/* ========== Utilitários / A11y ========== */
:focus-visible{
  outline: 3px solid rgba(94,139,111,.55);
  outline-offset: 2px;
  border-radius: 10px;
}
.center{text-align:center}
.muted{color:var(--muted)}
.mt-0{margin-top:0}.mt-1{margin-top:6px}.mt-2{margin-top:10px}.mt-3{margin-top:16px}.mt-4{margin-top:22px}.mt-5{margin-top:28px}
.mb-0{margin-bottom:0}.mb-1{margin-bottom:6px}.mb-2{margin-bottom:10px}.mb-3{margin-bottom:16px}.mb-4{margin-bottom:22px}.mb-5{margin-bottom:28px}
.hide{display:none !important}
@keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.fade-up{animation:fadeUp .6s ease both}

/* Tema claro: ajustes de cards/contornos para mais contraste */
body.light-mode .card,
body.light .card{
  background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.75));
  border-color: rgba(10,20,40,.08);
  box-shadow: var(--shadow);
}
body.light-mode .chat-box,
body.light .chat-box{
  background: #ffffffcc;
  border-color: rgba(10,20,40,.08);
}
body.light-mode .tab-btn.is-active,
body.light .tab-btn.is-active{
  outline-color: rgba(94,139,111,.65);
  background: rgba(94,139,111,.12);
}

/* ========== Responsivo ========== */
@media (max-width:1040px){
  .grid-3{grid-template-columns:repeat(2,1fr)}
  .grid-4{grid-template-columns:repeat(2,1fr)}
  .logo svg,.logo img{height:38px}
}
@media (max-width:820px){
  .menu-toggle{display:inline-flex}
  .nav-links{
    position:fixed; top:70px; left:12px; right:12px; display:none; flex-direction:column; gap:6px;
    background:var(--glass); backdrop-filter:var(--blur); border:1px solid var(--line); border-radius:16px; padding:10px; box-shadow:var(--shadow)
  }
  .nav-links.is-open{display:flex}
  .layout{ grid-template-columns: 1fr; }
  .sidebar{ position: static; }
}
@media (max-width:560px){
  .grid-3,.grid-4{grid-template-columns:1fr}
  .hero__title{font-size:clamp(1.6rem,8vw,2rem)}
  .btn{padding:.8rem 1rem}
  .stat__value{font-size:clamp(24px,7vw,30px)}
}
/* Respeito à redução de movimento */
@media (prefers-reduced-motion:reduce){*{animation:none!important;transition:none!important}}
